<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Bravist</title>
  <subtitle>äº’è”ç½‘åº”ç”¨åç«¯å¼€å‘è€…ã€æ¶æ„å¸ˆ</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://www.chenghuiyong.com/"/>
  <updated>2017-05-15T08:19:40.000Z</updated>
  <id>https://www.chenghuiyong.com/</id>
  
  <author>
    <name>Bravist</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>macOS å®‰è£… iTerm2 + Fish Shell</title>
    <link href="https://www.chenghuiyong.com/2017-05-15/fish-shell.html"/>
    <id>https://www.chenghuiyong.com/2017-05-15/fish-shell.html</id>
    <published>2017-05-15T08:18:46.000Z</published>
    <updated>2017-05-15T08:19:40.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p><strong>Unix shell</strong>ï¼Œä¸€ç§<a href="https://zh.wikipedia.org/wiki/%E6%AE%BC%E5%B1%A4" target="_blank" rel="external">å£³å±‚</a>ä¸<a href="https://zh.wikipedia.org/wiki/%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%95%8C%E9%9D%A2" target="_blank" rel="external">å‘½ä»¤è¡Œç•Œé¢</a>ï¼Œæ˜¯<a href="https://zh.wikipedia.org/wiki/Unix" target="_blank" rel="external">Unix</a><a href="https://zh.wikipedia.org/wiki/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F" target="_blank" rel="external">æ“ä½œç³»ç»Ÿ</a>ä¸‹ä¼ ç»Ÿçš„ç”¨æˆ·å’Œè®¡ç®—æœºçš„äº¤äº’ç•Œé¢ã€‚ç¬¬ä¸€ä¸ªç”¨æˆ·ç›´æ¥è¾“å…¥<a href="https://zh.wikipedia.org/wiki/%E5%91%BD%E4%BB%A4_(%E8%AE%A1%E7%AE%97%E6%9C%BA" target="_blank" rel="external">å‘½ä»¤</a>)æ¥æ‰§è¡Œå„ç§å„æ ·çš„ä»»åŠ¡ã€‚</p>
<p>æ™®é€šæ„ä¹‰ä¸Šçš„shellå°±æ˜¯å¯ä»¥æ¥å—ç”¨æˆ·è¾“å…¥å‘½ä»¤çš„ç¨‹åºã€‚å®ƒä¹‹æ‰€ä»¥è¢«ç§°ä½œshellæ˜¯å› ä¸ºå®ƒéšè—äº†æ“ä½œç³»ç»Ÿä½å±‚çš„ç»†èŠ‚ã€‚åŒæ ·çš„Unixä¸‹çš„å›¾å½¢ç”¨æˆ·ç•Œé¢<a href="https://zh.wikipedia.org/wiki/GNOME" target="_blank" rel="external">GNOME</a>å’Œ<a href="https://zh.wikipedia.org/wiki/KDE" target="_blank" rel="external">KDE</a>ï¼Œæœ‰æ—¶ä¹Ÿè¢«å«åšâ€œè™šæ‹Ÿshellâ€æˆ–â€œå›¾å½¢shellâ€ã€‚</p>
<p> â€” æ¥è‡ªç»´åŸºç™¾ç§‘</p>
</blockquote>
<p>Fish Shellæ˜¯*unixå¹³å°ä¸­æ‰€æœ‰Shellä¸­çš„ä¸€ç§Shellï¼Œç›¸æ¯”ç³»ç»Ÿé»˜è®¤Shell <code>bash</code>ï¼Œæä¾›æ›´å¤šæ¼‚äº®çš„ã€å®ç”¨çš„ã€å¼ºå¤§çš„å‘½ä»¤è¡Œäº¤äº’ã€‚ </p>
<blockquote>
<p><strong>fish</strong>æ˜¯ä¸€ä¸ª<a href="https://zh.wikipedia.org/wiki/Unix_shell" target="_blank" rel="external">Unix shell</a>ã€‚ fishè¿™ä¸ªåå­—æ˜¯<em>friendly interactive shell</em>çš„ç¼©å†™ã€‚ fishä¸“æ³¨äºäº¤äº’åº”ç”¨ã€æ˜“ç”¨æ€§å’Œå‹å¥½çš„ç”¨æˆ·ä½“éªŒã€‚fishçš„è®¾è®¡ç›®çš„æ˜¯é€šè¿‡å®¹æ˜“å‘ç°ï¼Œè®°ä½å’Œä½¿ç”¨çš„æ–¹å¼ä¸ºç”¨æˆ·æä¾›ä¸€å¥—ä¸°å¯Œã€å¼ºå¤§çš„åŠŸèƒ½ ã€‚fishäº2005å¹´åœ¨<a href="https://zh.wikipedia.org/wiki/GNU%E9%80%9A%E7%94%A8%E5%85%AC%E5%85%B1%E8%AE%B8%E5%8F%AF%E8%AF%81" target="_blank" rel="external">GNUé€šç”¨å…¬å…±è®¸å¯è¯</a>æ¡æ¬¾ä¸‹æ­£å¼å‘å¸ƒã€‚fish æ˜¯ä¸€æ¬¾<a href="https://zh.wikipedia.org/wiki/%E8%87%AA%E7%94%B1%E8%BD%AF%E4%BB%B6" target="_blank" rel="external">è‡ªç”±è½¯ä»¶</a>ã€‚</p>
</blockquote>
<p>ä¸»è¦ç‰¹æ€§</p>
<ul>
<li>ä¼˜ç§€çš„tabè¡¥å…¨åŠŸèƒ½</li>
<li>å…·æœ‰å¹¿æ³›é”™è¯¯æ£€æŸ¥çš„<a href="https://zh.wikipedia.org/wiki/%E8%AA%9E%E6%B3%95%E9%AB%98%E4%BA%AE%E5%BA%A6%E9%A1%AF%E7%A4%BA" target="_blank" rel="external">è¯­æ³•é«˜äº®åº¦æ˜¾ç¤º</a></li>
<li>æ”¯æŒ<a href="https://zh.wikipedia.org/wiki/X_Window%E7%B3%BB%E7%B5%B1" target="_blank" rel="external">Xçª—å£ç³»ç»Ÿ</a>å’Œ<a href="http://en.wikipedia.org/wiki/Clipboard_(software" target="_blank" rel="external">å‰ªè´´æ¿</a>)</li>
<li>åŸºäº<a href="http://en.wikipedia.org/wiki/Terminfo" target="_blank" rel="external">terminfo</a>çš„æ™ºèƒ½çš„<a href="https://zh.wikipedia.org/wiki/%E7%B5%82%E7%AB%AF" target="_blank" rel="external">ç»ˆç«¯</a>å¤„ç†</li>
<li>å¯ä»¥æŸ¥è¯¢çš„<a href="http://en.wikipedia.org/wiki/Command_history" target="_blank" rel="external">å‘½ä»¤å†å²</a></li>
</ul>
<p>åœ¨macOS ä¸­æ¨èä½¿ç”¨homebrewå®‰è£… fish shellï¼Œå› ä¸ºä½ èƒ½å¤Ÿéå¸¸æ–¹ä¾¿çš„å¸è½½fish shell</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">âœ  logs git:(develop) brew install fish</div><div class="line">==&gt; Downloading https://homebrew.bintray.com/bottles/fish-2.5.0.sierra.bottle.tar.gz</div><div class="line">######################################################################## 100.0%</div><div class="line">==&gt; Pouring fish-2.5.0.sierra.bottle.tar.gz</div><div class="line">==&gt; Using the sandbox</div><div class="line">==&gt; Caveats</div><div class="line">You will need to add:</div><div class="line">  /usr/local/bin/fish</div><div class="line">to /etc/shells.</div><div class="line"></div><div class="line">Then run:</div><div class="line">  chsh -s /usr/local/bin/fish</div><div class="line">to make fish your default shell.</div><div class="line">==&gt; Summary</div><div class="line">ğŸº  /usr/local/Cellar/fish/2.5.0: 864 files, 6.4MB</div></pre></td></tr></table></figure>
<p><code>brew install fish</code> åˆšåœ¨ä½ çš„<code>/etc/shells</code>æ–‡ä»¶ä¸­æ·»åŠ äº†<code>/usr/local/bin/fish</code>æ–‡æœ¬è¡Œã€‚å¦‚æœä½ æƒ³è®©fish æˆä¸ºç³»ç»Ÿé»˜è®¤çš„shellï¼Œä½¿ç”¨<code>chsh -s /usr/local/bin/fish</code> åˆ‡æ¢ï¼Œå¦‚æœä½ æ­£è¿è¡Œåœ¨å…¶ä»–çš„shellä¸­ï¼Œå¯ä»¥ä½¿ç”¨<code>fish</code>å¿«é€Ÿåˆ‡æ¢åˆ°fish shellã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">âœ  logs git:(develop) fish</div><div class="line">Welcome to fish, the friendly interactive shell</div><div class="line">Type help for instructions on how to use fish</div><div class="line"> ~/A/P/b/s/logs î‚° î‚  develop  î‚°</div></pre></td></tr></table></figure>
<p>ä½ å¯ä»¥å…ˆæŸ¥çœ‹macOSä¸­æ­£åœ¨ä½¿ç”¨çš„shell</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">âœ  ~ echo $SHELL</div><div class="line">/bin/zsh</div><div class="line">âœ  ~</div></pre></td></tr></table></figure>
<p>åŒæ—¶æŸ¥è¯¢macOS ç³»ç»Ÿä¸­å·²ç»å®‰è£…çš„æ‰€æœ‰shellsã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">âœ  ~ cat /etc/shells</div><div class="line"># List of acceptable shells for chpass(1).</div><div class="line"># Ftpd will not allow users to connect who are not using</div><div class="line"># one of these shells.</div><div class="line"></div><div class="line">/bin/bash</div><div class="line">/bin/csh</div><div class="line">/bin/ksh</div><div class="line">/bin/sh</div><div class="line">/bin/tcsh</div><div class="line">/usr/local/bin/fish</div><div class="line">/bin/zsh</div><div class="line">âœ  ~</div></pre></td></tr></table></figure>
<p>æœ€åï¼Œè®©fish shell æˆä¸ºé»˜è®¤çš„shellã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">âœ  ~ cat /etc/shells</div><div class="line"># List of acceptable shells for chpass(1).</div><div class="line"># Ftpd will not allow users to connect who are not using</div><div class="line"># one of these shells.</div><div class="line"></div><div class="line">/bin/bash</div><div class="line">/bin/csh</div><div class="line">/bin/ksh</div><div class="line">/bin/sh</div><div class="line">/bin/tcsh</div><div class="line">/usr/local/bin/fish</div><div class="line">/bin/zsh</div><div class="line">âœ  ~ chsh -s /usr/local/bin/fish</div><div class="line">Changing shell for chenghuiyong.</div><div class="line">Password for chenghuiyong:</div><div class="line">âœ  ~</div></pre></td></tr></table></figure>
<p>å®‰è£…fish shellä»…ä»…èƒ½ä½“éªŒéƒ¨åˆ†æ¯”<code>bash</code>æ›´å¥½çš„ä½“éªŒï¼Œæ¨èåœ¨å®‰è£…fish shell æ¡†æ¶ - oh-my-fishï¼Œä»–æä¾›äº†æ›´åŠ ä¸°å¯Œçš„æ’ä»¶ç®¡ç†ã€ä¸»é¢˜å†…å®¹è®©ä½ çš„shellçœ‹ç€æ›´åŠ â€œç‰›é€¼â€ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">âœ  ~ curl -L https://get.oh-my.fish | fish</div><div class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</div><div class="line">                                 Dload  Upload   Total   Spent    Left  Speed</div><div class="line">100   194  100   194    0     0    114      0  0:00:01  0:00:01 --:--:--   114</div><div class="line">100 16533  100 16533    0     0   5244      0  0:00:03  0:00:03 --:--:-- 14696</div><div class="line">Existing installation detected at /Users/chenghuiyong/.local/share/omf</div><div class="line">Would you like to remove the existing installation? (y/N): y</div><div class="line">This will uninstall Oh My Fish and all plugins and themes from</div><div class="line">/Users/chenghuiyong/.local/share/omf.</div><div class="line">Are you sure you want to continue? (y/N): y</div><div class="line">Uninstalling from /Users/chenghuiyong/.local/share/omf...</div><div class="line">Uninstall complete</div><div class="line">Installing Oh My Fish to /Users/chenghuiyong/.local/share/omf...</div><div class="line">Using release channel &quot;stable&quot;.</div><div class="line">Cloning master from https://github.com/oh-my-fish/oh-my-fish.git...</div><div class="line">Writing bootstrap to /Users/chenghuiyong/.config/fish/conf.d/omf.fish...</div><div class="line">Setting up Oh My Fish configuration...</div><div class="line">Updating https://github.com/oh-my-fish/packages-main master... Done!</div><div class="line">Installing package default</div><div class="line">âœ” default successfully installed.</div><div class="line">Installation successful!</div></pre></td></tr></table></figure>
<p>é»˜è®¤çš„ä¸»é¢˜æ˜¾ç¤ºå¦‚ä¸‹ï¼Œè¿™é‡Œæ¨èä½¿ç”¨ä¸»é¢˜ - agnoster</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">â‹Š&gt; ~/A/P/bravist.com on develop â—¦ omf install agnoster                                                                                                13:22:35</div><div class="line">Updating https://github.com/oh-my-fish/packages-main master... Done!</div><div class="line">Installing package agnoster</div><div class="line">âœ” agnoster successfully installed.</div></pre></td></tr></table></figure>
<p>ç»“åˆå­—ä½“<a href="https://github.com/tonsky/FiraCode" target="_blank" rel="external">firacode</a>è®©ä½ çš„iTerm2 çœ‹èµ·æ¥æ¼‚äº®æäº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">  ~ î‚° brew tap caskroom/fonts</div><div class="line">Updating Homebrew...</div><div class="line"></div><div class="line">  ~ î‚° brew cask install font-fira-code</div><div class="line">Warning: A Cask for font-fira-code is already installed.</div><div class="line"></div><div class="line">To re-install font-fira-code, run:</div><div class="line">  brew cask reinstall font-fira-code</div><div class="line"> ~ î‚° brew cask reinstall font-fira-code</div></pre></td></tr></table></figure>
<p>å¦å¤–ï¼Œæ¨èä¸€æ¬¾iTerm2 ä¸»é¢˜ - <a href="https://draculatheme.com/iterm/" target="_blank" rel="external">Dracula</a></p>
<p>ç›¸å…³èµ„æ–™</p>
<ul>
<li><a href="https://github.com/fish-shell/fish-shell" target="_blank" rel="external">é¢å‘ç”¨æˆ·å‹å¥½çš„Shell - fish shell</a></li>
<li><a href="https://github.com/fisherman/fisher+ man" target="_blank" rel="external">fish shellæ’ä»¶ç®¡ç†å·¥å…· - fisherman</a></li>
<li><a href="https://github.com/oh-my-fish/oh-my-fish" target="_blank" rel="external">fish shell æ¡†æ¶ - oh-my-fish</a></li>
<li><a href="https://jigsawye.com/2016/06/20/install-fish-shell-on-os-x/" target="_blank" rel="external">åœ¨ OSX ä½¿ç”¨ Fish shell å–ä»£ bash/zsh</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Unix shell&lt;/strong&gt;ï¼Œä¸€ç§&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E6%AE%BC%E5%B1%A4&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å£³å±‚&lt;/
    
    </summary>
    
    
      <category term="macOS" scheme="https://www.chenghuiyong.com/tags/macOS/"/>
    
      <category term="iTerm2" scheme="https://www.chenghuiyong.com/tags/iTerm2/"/>
    
      <category term="Fish Shell" scheme="https://www.chenghuiyong.com/tags/Fish-Shell/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•å®‰è£…å¹¶é…ç½®LNMPç¯å¢ƒåœ¨CentOS 7ä¸­</title>
    <link href="https://www.chenghuiyong.com/2017-04-21/centos-lnmp.html"/>
    <id>https://www.chenghuiyong.com/2017-04-21/centos-lnmp.html</id>
    <published>2017-04-21T15:32:48.000Z</published>
    <updated>2017-05-15T08:18:05.000Z</updated>
    
    <content type="html"><![CDATA[<p>LNMP æ˜¯ä¸€ç»„åº”ç”¨ç¨‹åºæœåŠ¡ç»„åˆçš„ç¼©å†™ï¼Œç”¨äºè¿ç”¨åŸºäºPHPè„šæœ¬è¯­è¨€çš„Webåº”ç”¨ç¨‹åºã€‚å®ƒä¸»è¦ç”±å››éƒ¨åˆ†å†…å®¹ç»„æˆï¼Œ<strong>L</strong>inux æ“ä½œç³»ç»Ÿï¼ˆåŸºäºCentOS linuxå‘è¡Œç‰ˆï¼‰ï¼Œ<strong>N</strong>ginx webæœåŠ¡å™¨ï¼Œ<strong>M</strong>ysql æ•°æ®åº“æœåŠ¡å™¨ï¼ˆä½¿ç”¨MariaDBï¼‰ï¼Œ<strong>P</strong>HP åŠ¨æ€è„šæœ¬è§£æå™¨PHP-FPMã€‚</p>
<p>å¼€å§‹å®‰è£…<strong>LNMP</strong>æœåŠ¡ä¹‹å‰ï¼Œæ¨èä¼˜åŒ–é…ç½®ä¸€ä¸‹æ‚¨çš„CentOS 7ä½œä¸šç¯å¢ƒã€‚</p>
<h2 id="åˆå§‹åŒ–é…ç½®CentOS-7"><a href="#åˆå§‹åŒ–é…ç½®CentOS-7" class="headerlink" title="åˆå§‹åŒ–é…ç½®CentOS 7"></a>åˆå§‹åŒ–é…ç½®CentOS 7</h2><p>å‡è®¾æ‚¨æœ‰ä¸€å°æ–°è´­ä¹°çš„CentOS 7 æœåŠ¡å™¨ï¼ŒåŒæ—¶å·²ç»åˆ›å»ºäº†<code>root</code>è´¦æˆ·å¹¶èƒ½å¤Ÿä½¿ç”¨<code>ssh</code> æ–¹å¼ç™»å½•ã€‚</p>
<h3 id="æ­¥éª¤ä¸€ã€åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·"><a href="#æ­¥éª¤ä¸€ã€åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·" class="headerlink" title="æ­¥éª¤ä¸€ã€åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·"></a>æ­¥éª¤ä¸€ã€åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·</h3><p>ä½¿ç”¨æ‚¨çš„<code>root</code>è´¦æˆ·ç™»å½•åˆ°æ‚¨çš„æœåŠ¡å™¨ï¼Œä¸‹é¢çš„å‘½ä»¤ç”¨äºåˆ›å»ºä¸€ä¸ªå«<code>bravist</code>çš„ç”¨æˆ·ï¼Œä»¿ç…§å®ƒåˆ›å»ºä¸€ä¸ªæ‚¨è‡ªå·±çš„è´¦æˆ·ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">local$ ssh root@SERVER_IP_ADDRESS</div><div class="line"></div><div class="line"># adduser bravist</div></pre></td></tr></table></figure>
<p>æ¥ç€ï¼Œä¸ºæ–°ç”¨æˆ·è®¾ç½®ä¸€ä¸‹ç™»å½•å¯†ç </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># passwd bravist</div></pre></td></tr></table></figure>
<p>è¾“å…¥ä¸€ä¸ªæ¯”è¾ƒå¼ºå£®çš„å¯†ç å¹¶é‡å¤ç„¶åä¿å­˜ã€‚</p>
<h3 id="æ­¥éª¤äºŒã€è®¾ç½®æ–°ç”¨æˆ·æ‹¥æœ‰Rootè´¦æˆ·æƒé™"><a href="#æ­¥éª¤äºŒã€è®¾ç½®æ–°ç”¨æˆ·æ‹¥æœ‰Rootè´¦æˆ·æƒé™" class="headerlink" title="æ­¥éª¤äºŒã€è®¾ç½®æ–°ç”¨æˆ·æ‹¥æœ‰Rootè´¦æˆ·æƒé™"></a>æ­¥éª¤äºŒã€è®¾ç½®æ–°ç”¨æˆ·æ‹¥æœ‰Rootè´¦æˆ·æƒé™</h3><p>æ‚¨åˆšåˆšåˆ›å»ºçš„ç”¨æˆ·<code>bravist</code>é»˜è®¤æ‹¥æœ‰æ™®é€šç”¨æˆ·æƒé™ï¼Œä½†æ˜¯ï¼Œæœ‰æ—¶å€™æ‚¨éœ€è¦æ‹¥æœ‰æ›´å¤šæƒé™å¤„ç†ä¸€äº›é«˜çº§çš„ä»»åŠ¡ï¼Œæ­¤æ—¶å°±å…è®¸è®©æ–°ç”¨æˆ·æ‹¥æœ‰æ›´é«˜çš„æƒé™ï¼Œæ‰§è¡Œç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"># gpasswd -a bravist wheel</div></pre></td></tr></table></figure>
<p>ç°åœ¨ï¼Œæ‚¨å¯ä»¥åœ¨å‘½åçš„å‰é¢æ·»åŠ <code>sudo</code> è®©å…¶æ‰§è¡Œç®¡ç†å‘˜çš„ä»»åŠ¡<code>sudo cat /etc/redhat-release</code></p>
<h3 id="æ­¥éª¤ä¸‰ã€ä¸Šä¼ æœ¬åœ°SSHå…¬é’¥"><a href="#æ­¥éª¤ä¸‰ã€ä¸Šä¼ æœ¬åœ°SSHå…¬é’¥" class="headerlink" title="æ­¥éª¤ä¸‰ã€ä¸Šä¼ æœ¬åœ°SSHå…¬é’¥"></a>æ­¥éª¤ä¸‰ã€ä¸Šä¼ æœ¬åœ°SSHå…¬é’¥</h3><p>æ·»åŠ äº†æ–°ç”¨æˆ·<code>bravist</code>åï¼Œåœ¨æœ¬åœ°å‘½ä»¤è¡Œç»ˆç«¯å¯ä»¥ç›´æ¥ç™»å½•äº†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">local$ ssh bravist@SERVER_IP_ADDRESS</div></pre></td></tr></table></figure>
<p>è¾“å…¥å¯†ç ï¼Œå›è½¦ç™»å½•ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¸ºæœ¬åœ°ç”¨æˆ·åˆ›å»ºä¸€ä¸ªssh å…¬é’¥ï¼Œç„¶åå°†è¯¥å…¬é’¥ä¸Šä¼ è‡³æœåŠ¡å™¨æ–°ç”¨æˆ·<code>bravist</code> æˆæƒæ–‡ä»¶ä¸­<code>.ssh/authorized_keys</code>ã€‚è¿™æ ·å°±å¯ä»¥æ— éœ€æ¯æ¬¡è¾“å…¥<code>bravist</code>è´¦æˆ·å¯†ç è‡ªåŠ¨ç™»å½•ã€‚</p>
<p>åœ¨æœ¬åœ°ç”Ÿæˆç§˜é’¥å¯¹ï¼Œä½¿ç”¨<code>ssh-keygen</code>ç„¶åè¾“å…¥å¯†ç </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">local$ ssh-keygen</div></pre></td></tr></table></figure>
<p>å›è½¦åï¼Œä¼šåœ¨æ‚¨çš„â€œæœ¬åœ°ç”¨æˆ·â€ä¸»ç›®å½•ä¸­åˆ›å»º<code>.ssh</code>ç›®å½•å’Œæ–‡ä»¶ã€‚åœ¨æœ¬åœ°ç”¨æˆ·ä¸»ç›®å½•ä¸­æ‚¨ä¼šçœ‹åˆ°ä¸€ä¸ªå…¬é’¥<code>~/.ssh/id_rsa.pub</code>å’Œä¸€ä¸ªç§é’¥<code>~/.ssh/id_rsa</code>ã€‚</p>
<p>æ¥ç€ï¼Œä¸Šä¼ æ‚¨çš„å…¬é’¥è‡³æœåŠ¡å™¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">local$ ssh-copy-id brave@SERVER_IP_ADDRESS</div></pre></td></tr></table></figure>
<p>å›è½¦ï¼Œè¾“å…¥å¯†ç åæ‚¨æœ¬åœ°çš„å…¬é’¥ä¼šè‡ªåŠ¨è¢«å†™å…¥åˆ°æœåŠ¡å™¨çš„<code>/home/bravist/.ssh/authorized_keys</code>æ–‡ä»¶ä¸­ã€‚å¦‚æœæœ¬åœ°ä¸èƒ½æ‰§è¡Œ<code>ssh-copy-id</code>å‘½ä»¤ï¼Œæ‚¨å¯ä»¥é€šè¿‡å…¶ä»–çš„æ–¹å¼ä¸Šä¼ å¹¶æ‰‹åŠ¨å†™å…¥åˆ°ä¸Šé¢çš„æœåŠ¡å™¨æ–‡ä»¶ä¸­ï¼ŒPSï¼š<code>æ‰‹åŠ¨ä¸Šä¼ å¹¶å†™å…¥/home/bravist/.ssh/authorized_keysæ—¶ï¼Œéœ€è¦å†æ¬¡è®¾ç½®è¯¥æ–‡ä»¶çš„æƒé™ä¸º600 chmod 600 /home/bravist/.ssh/authorized_keys</code>ã€‚</p>
<h3 id="æ­¥éª¤å››ã€åˆ‡æ¢Bash-Shell-ä¸º-ZSH"><a href="#æ­¥éª¤å››ã€åˆ‡æ¢Bash-Shell-ä¸º-ZSH" class="headerlink" title="æ­¥éª¤å››ã€åˆ‡æ¢Bash Shell ä¸º ZSH"></a>æ­¥éª¤å››ã€åˆ‡æ¢Bash Shell ä¸º ZSH</h3><p>æ–°é…ç½®LinuxæœåŠ¡å™¨é»˜è®¤ä½¿ç”¨<code>bash</code> Shellï¼Œæ¨èä½¿ç”¨<code>ZSH</code>  shellï¼Œå®ƒæä¾›æ›´å‹å¥½çš„ä¸»é¢˜å’Œäº¤äº’ä½“éªŒã€‚</p>
<p>å®‰è£…ZSH</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo yum -y install zsh</div></pre></td></tr></table></figure>
<p>æŸ¥çœ‹æœåŠ¡å™¨å­˜åœ¨å“ªäº›shellå’Œæ­£åœ¨ä½¿ç”¨çš„shell</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ chsh -l</div><div class="line"></div><div class="line">$ echo $SHELL</div></pre></td></tr></table></figure>
<p>ä¿®æ”¹é»˜è®¤shellä¸º<code>zsh</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ sudo chsh -s &quot;$(command -v zsh)&quot; &quot;$&#123;USER&#125;&quot;</div><div class="line"></div><div class="line">$ touch ~/.zshrc</div></pre></td></tr></table></figure>
<p>ç¡®è®¤æ˜¯å¦ä¿®æ”¹æˆåŠŸ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ echo $SHELL</div></pre></td></tr></table></figure>
<p>æœ€åï¼Œæ¨èå®‰è£…ä¸€ä¸‹<code>zsh</code>çš„å¦å¤–ä¸€ä¸ªæ¡†æ¶<code>on-my-zsh</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sh -c &quot;$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&quot;</div></pre></td></tr></table></figure>
<p>åˆ°è¿™é‡Œï¼Œä½ å¯ä»¥æ›´åŠ å¿ƒæƒ…æ„‰æ‚¦çš„ä½¿ç”¨æ‚¨çš„æœåŠ¡å™¨äº†ã€‚</p>
<h2 id="å¼€å§‹å®‰è£…LNMP"><a href="#å¼€å§‹å®‰è£…LNMP" class="headerlink" title="å¼€å§‹å®‰è£…LNMP"></a>å¼€å§‹å®‰è£…LNMP</h2><h3 id="ä¸€ã€å®‰è£…Nginx"><a href="#ä¸€ã€å®‰è£…Nginx" class="headerlink" title="ä¸€ã€å®‰è£…Nginx"></a>ä¸€ã€å®‰è£…Nginx</h3><p>è®¿é—®<a href="http://nginx.org/en/linux_packages.html" target="_blank" rel="external">Nginxå®˜ç½‘</a>ï¼ŒæŸ¥è¯¢Linuxç‰ˆæœ¬çš„Nignxå‘è¡Œç‰ˆæœ¬ã€‚åœ¨æ‚¨çš„<code>/etc/yum.repos.d/nginx.repo</code>æ–‡ä»¶ä¸­æ·»åŠ nginx yumä»“åº“</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo vi /etc/yum.repos.d/nginx.repo</div></pre></td></tr></table></figure>
<p>æ·»åŠ ä»¥ä¸‹å†…å®¹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[nginx]</div><div class="line">name=nginx repo</div><div class="line">baseurl=http://nginx.org/packages/centos/7/$basearch/</div><div class="line">gpgcheck=0</div><div class="line">enabled=1</div></pre></td></tr></table></figure>
<p>æŸ¥çœ‹æ˜¯å¦æ­£ç¡®æ·»åŠ äº†nignx yum è¿œç¨‹ä»“åº“</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo yum repolist</div></pre></td></tr></table></figure>
<p>å¼€å§‹å®‰è£…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo yum install -y nginx</div></pre></td></tr></table></figure>
<p>å¯åŠ¨nginxå¹¶è®¾ç½®å¼€æœºè‡ªå¯åŠ¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ sudo systemctl start nginx</div><div class="line"></div><div class="line">$ sudo systemctl enable nginx</div></pre></td></tr></table></figure>
<p>åœ¨æœ¬åœ°è®¿é—®æ‚¨çš„æœåŠ¡å™¨ï¼Œç¡®è®¤IPèƒ½å¤Ÿè®¿é—®ä½ ä»¬çš„WebæœåŠ¡å™¨ã€‚é€šå¸¸æ‚¨å¯ä»¥è¿™æ ·åšè¿™ä¸ªç¡®è®¤å·¥ä½œ</p>
<ul>
<li><p>æœåŠ¡å™¨æ˜¯å¦å¯åŠ¨äº†nginxå¹¶å¼€å¯äº†80ç«¯å£</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#80ç«¯å£æ˜¯å¦å¼€å¯</div><div class="line">$ netstat -tunlp</div><div class="line"></div><div class="line">#æ˜¯å¦å­˜åœ¨nginxè¿›ç¨‹</div><div class="line">$ ps aux | grep nginx</div></pre></td></tr></table></figure>
</li>
<li><p>æœ¬åœ°ç¡®è®¤æœåŠ¡å™¨é˜²ç«å¢™æ˜¯å¦å…è®¸è®¿é—®80ç«¯å£</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">local$ telnet SERVER_IP_ADDRESS 80</div><div class="line"></div><div class="line">Trying SERVER_IP_ADDRESS...</div><div class="line">Connected to SERVER_IP_ADDRESS.vultr.com.</div><div class="line">Escape character is &apos;^]&apos;.</div></pre></td></tr></table></figure>
<p>å¦‚æœæ²¡æœ‰çœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„è¾“å‡ºï¼Œæ‚¨å°±éœ€è¦é…ç½®ä¸€ä¸‹æœåŠ¡å™¨çš„é˜²ç«å¢™ã€‚CentOS 7 ä¸­é»˜è®¤å¼€å¯<code>firewalld</code>é˜²ç«å¢™æœåŠ¡ï¼Œé˜²ç«å¢™æœåŠ¡å¯ä»¥è‡ªè¡Œ<code>firewall-cmd --help</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#å¼€å¯443ç«¯å£</div><div class="line">$ sudo firewall-cmd --zone=public --add-service=https</div><div class="line"></div><div class="line">#å¼€å¯80ç«¯å£</div><div class="line">$ sudo firewall-cmd --zone=public --add-service=http</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="äºŒã€å®‰è£…PHP"><a href="#äºŒã€å®‰è£…PHP" class="headerlink" title="äºŒã€å®‰è£…PHP"></a>äºŒã€å®‰è£…PHP</h3><p>CentOS 7 ä½¿ç”¨ <code>yum</code> å®‰è£…PHPçš„ç‰ˆæœ¬é»˜è®¤æ˜¯5.4ï¼Œè¿™é‡Œæ¨èä½¿ç”¨PHP7å¤§ç‰ˆæœ¬ï¼Œä¿®æ”¹php yum ä»“åº“è®©å…¶æ”¯æŒPHP 7ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#è®¾ç½®iusä»“åº“</div><div class="line">$ sudo rpm -Uvh https://centos7.iuscommunity.org/ius-release.rpm</div><div class="line">#æ›´æ–°ä»“åº“</div><div class="line">$ sudo yum update</div></pre></td></tr></table></figure>
<p>æŸ¥æ‰¾ä»“åº“ä¸­çš„PHP 7ç›¸å…³çš„è½¯ä»¶åŒ…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo yum list | grep php70</div></pre></td></tr></table></figure>
<p>å› PHPé¡¹ç›®ä¸åŒï¼Œå¯èƒ½å®‰è£…PHPæ‰©å±•åŒ…ä¹Ÿä¸€ç›´ï¼Œè¿™é‡Œæˆ‘æ¨èä¸€ä¸‹é¡¹ç›®ç»å¸¸ä¼šç”¨åˆ°çš„ä¸€äº›PHPæ‰©å±•åŒ…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$  sudo yum install -y php70u-fpm-nginx php70u-cli php70u-mysqlnd php70u-mbstring php70u-mcrypt php70u-xml php70u-gd php70u-json php70u-bcmath</div></pre></td></tr></table></figure>
<p>PHPè¿è¡Œæ¨¡å¼åˆ†ä¸¤ç§ï¼Œä¸€ç§æ˜¯æœåŠ¡å™¨å‘½ä»¤è¡Œè¿è¡Œæ¨¡å¼PHP-CLIï¼Œä¸€ç§æ˜¯ç»“åˆWebæœåŠ¡å™¨åŠ¨æ€è§£æPHPè„šæœ¬å¹¶å°†ç»“æœè¿”å›ç»™WebæœåŠ¡å™¨æ¨¡å¼PHP-FPMã€‚æˆ‘ä»¬å®‰è£…ä¸¤ç§æ¨¡å¼ã€‚</p>
<p>å¯åŠ¨å¹¶è®¾ç½®å¼€æœºè‡ªå¯åŠ¨<code>php-fpm</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ sudo systemctl start php-fpm</div><div class="line"></div><div class="line">$ sudo systemctl enable php-fpm</div></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥ï¼Œç»§ç»­é…ç½®PHP-FPMç¯å¢ƒ</p>
<ol>
<li>ä¿®æ”¹æ–‡ä»¶<code>/etc/php-fpm.d/www.conf</code>ä½¿å…¶ç›‘å¬è„šæœ¬ä¸ºsockæ–¹å¼</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$sudo vi /etc/php-fpm.d/www.conf</div></pre></td></tr></table></figure>
<p>æ‰¾åˆ°<code>listen = 127.0.0.1:9000</code>å¹¶æ·»åŠ æ³¨é‡Šï¼Œç„¶ååœ¨ä¸‹é¢æ·»åŠ æ–‡æœ¬<code>listen = /run/php-fpm/www.sock</code>ï¼Œç±»ä¼¼ä¸‹é¢ä¿®æ”¹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line"></div><div class="line">; Note: This value is mandatory.</div><div class="line">;listen = 127.0.0.1:9000</div><div class="line">listen = /run/php-fpm/www.sock</div></pre></td></tr></table></figure>
<p>æŸ¥æ‰¾<code>listen.acl_users = nginx</code> å¹¶å»æ‰æ³¨é‡Š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line"></div><div class="line">;listen.acl_users = apache</div><div class="line">listen.acl_users = nginx</div></pre></td></tr></table></figure>
<ol>
<li>æ‰“å¼€æ–‡ä»¶<code>/etc/nginx/conf.d/php-fpm.conf</code>ï¼Œä¿®æ”¹æœåŠ¡å™¨ç›‘å¬è„šæœ¬</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"># PHP-FPM FastCGI server</div><div class="line"># network or unix domain socket configuration</div><div class="line"></div><div class="line">upstream php-fpm &#123;</div><div class="line">        #server 127.0.0.1:9000;</div><div class="line">        server unix:/run/php-fpm/www.sock;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¿å­˜é€€å‡ºï¼Œæ¥ç€æ‰“å¼€æ–‡ä»¶<code>/etc/nginx/conf.d/default.conf</code>ï¼Œä¿®æ”¹<code>fastcgi_pass</code>å€¼ä¸º<code>php-fpm</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">location ~ \.php$ &#123;</div><div class="line">      try_files $uri =404;</div><div class="line">      fastcgi_split_path_info ^(.+\.php)(/.+)$;</div><div class="line">      # fastcgi_pass unix:/var/run/php-fpm/php-fpm.sock;</div><div class="line">      fastcgi_pass php-fpm;</div><div class="line">      fastcgi_index index.php;</div><div class="line">      fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;</div><div class="line">      include fastcgi_params;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>é‡æ–°å¯åŠ¨nginxä¸php-fpmï¼Œä½ çš„Webä¸phpç¯å¢ƒå·²ç»é…ç½®å®Œæˆã€‚</p>
<h3 id="ä¸‰ã€å®‰è£…MariaDB"><a href="#ä¸‰ã€å®‰è£…MariaDB" class="headerlink" title="ä¸‰ã€å®‰è£…MariaDB"></a>ä¸‰ã€å®‰è£…MariaDB</h3><p>MariaDBæ˜¯Mysqlå®˜æ–¹ç»´æŠ¤çš„ä¸€ä¸ªæ•°æ®åº“å¼€æºåˆ†æ”¯ï¼Œè®¿é—®å®˜ç½‘æŸ¥çœ‹ç‰¹æ€§ä»‹ç»ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo yum install mariadb-server mariadb</div></pre></td></tr></table></figure>
<p>å¯åŠ¨MariaDB</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo systemctl start mariadb</div></pre></td></tr></table></figure>
<p>è®¾ç½®å¼€æœºè‡ªå¯åŠ¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo systemctl enable mariadb</div></pre></td></tr></table></figure>
<p>è®¾ç½®rootè´¦æˆ·å¯†ç </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo mysql_secure_installation</div></pre></td></tr></table></figure>
<p>è¾“å…¥å¯†ç ä¿å­˜é€€å‡ºã€‚</p>
<h2 id="å®‰è£…PHP-Composer"><a href="#å®‰è£…PHP-Composer" class="headerlink" title="å®‰è£…PHP Composer"></a>å®‰è£…PHP Composer</h2><p>ç°ä»£PHPå¼€å‘è€…ï¼Œéœ€è¦æŒæ¡ä¾èµ–åŒ…ç®¡ç†å·¥å…·Composerï¼Œåœ¨å›½å†…ï¼Œå»ºè®®é…ç½®é¡¹ç›®çš„ä»“åº“åœ°å€é…ç½®åˆ°<a href="https://pkg.phpcomposer.com/" target="_blank" rel="external">å›½å†…é•œåƒ</a>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ php -r &quot;copy(&apos;https://getcomposer.org/installer&apos;, &apos;composer-setup.php&apos;);&quot;</div><div class="line"></div><div class="line">$ php composer-setup.php</div><div class="line"></div><div class="line">$ sudo mv composer.phar /usr/local/bin/composer</div><div class="line"></div><div class="line">$ php -r &quot;unlink(&apos;composer-setup.php&apos;);&quot;</div></pre></td></tr></table></figure>
<h2 id="å®‰è£…è¿›ç¨‹ç®¡ç†å·¥å…·Supervisor"><a href="#å®‰è£…è¿›ç¨‹ç®¡ç†å·¥å…·Supervisor" class="headerlink" title="å®‰è£…è¿›ç¨‹ç®¡ç†å·¥å…·Supervisor"></a>å®‰è£…è¿›ç¨‹ç®¡ç†å·¥å…·Supervisor</h2><p>å®‰è£…pythonç›¸å…³å·¥å…·</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo yum -y install python-setuptools</div></pre></td></tr></table></figure>
<p>ä½¿ç”¨<code>easy_install</code>å®‰è£…<code>supervisor</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo easy_install supervisor</div></pre></td></tr></table></figure></p>
<p>ç”Ÿæˆsupervisoré…ç½®æ–‡ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ echo_supervisord_conf &gt; /etc/supervisord.conf</div><div class="line"></div><div class="line">$ sudo mkdir -p /var/log/supervisor</div><div class="line"></div><div class="line">$ sudo mkdir -p /etc/supervisor/conf.d/</div><div class="line"></div><div class="line">$ sudo echo -e &quot;[include]\nfiles = /etc/supervisor/conf.d/*.conf&quot;&gt;&gt;/etc/supervisord.conf</div></pre></td></tr></table></figure></p>
<p>å¯åŠ¨supervisoræœåŠ¡ï¼Œè¯»å–é…ç½®æ–‡ä»¶å¹¶æ›´æ–°<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ supervisord</div><div class="line"></div><div class="line">$ supervisorctl reread</div><div class="line"></div><div class="line">$ supervisorctl update</div><div class="line"></div><div class="line">$ supervisorctl restart all</div></pre></td></tr></table></figure></p>
<h2 id="éšè—Nignxä¸PHPç‰ˆæœ¬å·"><a href="#éšè—Nignxä¸PHPç‰ˆæœ¬å·" class="headerlink" title="éšè—Nignxä¸PHPç‰ˆæœ¬å·"></a>éšè—Nignxä¸PHPç‰ˆæœ¬å·</h2><p>ç¼–è¾‘æ–‡ä»¶<code>/etc/nginx/conf.d/default.conf</code>ï¼Œå¹¶æ·»åŠ æ–‡æœ¬<code>server_tokens off;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ sudo vi /etc/nginx/conf.d/default.conf</div><div class="line">...</div><div class="line"></div><div class="line">#add server_tokens</div><div class="line">server_tokens off;</div></pre></td></tr></table></figure>
<p>ä¿å­˜é€€å‡ºï¼Œç»§ç»­æ‰“å¼€æ–‡ä»¶<code>/etc/php.ini</code>ï¼Œå°†<code>expose_php</code>å‚æ•°å€¼è®¾ç½®ä¸º<code>off</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ sudo vi /etc/php.ini</div><div class="line"></div><div class="line">...</div><div class="line"></div><div class="line">#è®¾ç½®expse_php=Off</div><div class="line">expose_php = Off</div></pre></td></tr></table></figure>
<p>é€€å‡ºå¹¶é‡æ–°å¯åŠ¨<code>nginx</code>ä¸<code>php-fpm</code>ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;LNMP æ˜¯ä¸€ç»„åº”ç”¨ç¨‹åºæœåŠ¡ç»„åˆçš„ç¼©å†™ï¼Œç”¨äºè¿ç”¨åŸºäºPHPè„šæœ¬è¯­è¨€çš„Webåº”ç”¨ç¨‹åºã€‚å®ƒä¸»è¦ç”±å››éƒ¨åˆ†å†…å®¹ç»„æˆï¼Œ&lt;strong&gt;L&lt;/strong&gt;inux æ“ä½œç³»ç»Ÿï¼ˆåŸºäºCentOS linuxå‘è¡Œç‰ˆï¼‰ï¼Œ&lt;strong&gt;N&lt;/strong&gt;ginx webæœåŠ¡å™¨ï¼Œ&lt;stron
    
    </summary>
    
    
      <category term="CentOS" scheme="https://www.chenghuiyong.com/tags/CentOS/"/>
    
      <category term="LNMP" scheme="https://www.chenghuiyong.com/tags/LNMP/"/>
    
  </entry>
  
  <entry>
    <title>NodeJS Webhooks å®ç°ä»£ç è‡ªåŠ¨éƒ¨ç½²</title>
    <link href="https://www.chenghuiyong.com/2017-04-06/nodejs-webhooks.html"/>
    <id>https://www.chenghuiyong.com/2017-04-06/nodejs-webhooks.html</id>
    <published>2017-04-06T12:22:05.000Z</published>
    <updated>2017-04-06T12:37:41.000Z</updated>
    
    <content type="html"><![CDATA[<p>â€‹åœ¨æˆ‘çš„<a href="https://github.com/bravist" target="_blank" rel="external">Github</a>ä¸­æœ‰ä¸¤ä¸ªå…³äºGitlabä»£ç è‡ªåŠ¨éƒ¨ç½²çš„é¡¹ç›®ï¼Œä¸€ä¸ªæ˜¯PHPç‰ˆæœ¬çš„<a href="https://github.com/bravist/gitlab-webhook-php" target="_blank" rel="external">Gitlab Webhooks</a>ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯NodeJSç‰ˆæœ¬çš„<a href="https://github.com/bravist/node-gitlab-hook" target="_blank" rel="external">Gitlab Webhooks</a>ã€‚ä¹‹å‰æˆ‘åœ¨ç¤¾åŒºåˆ†äº«è¿‡PHPç‰ˆæœ¬çš„Gitlab Webhooksï¼Œå¯èƒ½å¤§éƒ¨åˆ†æµè§ˆè¿‡çš„åŒå­¦ä¼šç…§ç€è¿™ç¯‡æ•™ç¨‹äº²è‡ªå°è¯•å®‰è£…éƒ¨ç½²ã€‚åœ¨è¿™ç¯‡æ–‡ç« é‡Œï¼Œæˆ‘ä¼šæ¨èä½¿ç”¨NodeJSç‰ˆæœ¬çš„Gitlab Webhookså¹¶è§£é‡Šä¸ºä»€ä¹ˆä¼šå»ºè®®å»ä½¿ç”¨å®ƒã€‚</p>
<p>â€‹PHPç‰ˆæœ¬Gitlab Webhooks ä¸»è¦æ£€æŸ¥å½“å‰æäº¤<code>Git</code>ç‰ˆæœ¬åˆ†æ”¯å¹¶æ‰§è¡Œä¸åŒ<code>Linux Shell</code>è„šæœ¬ï¼Œå®ç°é¡¹ç›®ä»£ç çš„è‡ªåŠ¨éƒ¨ç½²ï¼Œäº†è§£PHPçŸ¥è¯†çš„åŒå­¦å¾ˆå®¹æ˜“ç†è§£å®ƒçš„æ€æƒ³å’Œé€»è¾‘ï¼Œä¸ºä»€ä¹ˆæˆ‘ä¸æ¨èä½¿ç”¨å®ƒå‘¢ï¼Ÿ</p>
<p>â€‹<strong>ç¬¬ä¸€ã€å…‹éš†<code>https://github.com/bravist/gitlab-webhook-php</code>åï¼Œéœ€è¦å¤šæ¬¡ä¿®æ”¹é¡¹ç›®é…ç½®ä¿¡æ¯å’Œä¾èµ–è¿è¡Œä¸»æœºç›®å½•</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#æŸ¥çœ‹ gitlab.php</span></div><div class="line"></div><div class="line">$access_token = <span class="string">'MmNmMGRmMGI2Y2EyYjY3NzFjMzRjODkzZTQ3NjY5M2Y='</span>;</div><div class="line"><span class="comment">##è¿™é‡Œéœ€è¦è®¾ç½®è®¿é—®ä»¤ç‰Œï¼Œé¿å…éæ³•æœåŠ¡å™¨è®¿é—®Webhooksåœ°å€</span></div><div class="line"></div><div class="line">$access_ip = <span class="keyword">array</span>(<span class="string">'&#123;server&#125;'</span>);</div><div class="line"><span class="comment">##å…è®¸è®¿é—®IPåœ°å€ï¼Œå¿…é¡»ä¿®æ”¹æ­¤åœ°å€ï¼Œå¦åˆ™æ— æ³•è®¿é—®</span></div><div class="line"></div><div class="line">exec(<span class="string">"/mnt/www/&#123;project&#125;/public/gitlab-webhook-php/master_deploy.sh"</span>);</div><div class="line"><span class="comment">##è¿™é‡Œçš„projectéœ€è¦è®¾ç½®ä¸ºæœåŠ¡å™¨å½“å‰è¿è¡Œé¡¹ç›®çš„è·¯å¾„åœ°å€</span></div><div class="line"></div><div class="line"><span class="comment">#æŸ¥çœ‹ develop_deploy.sh</span></div><div class="line"></div><div class="line">cd /mnt/www/&#123;project&#125;</div><div class="line"><span class="comment">##åŒæ ·çš„ï¼Œåœ¨Shellè„šæœ¬ä¸­ï¼Œä¹Ÿéœ€è¦é…ç½®é¡¹ç›®çš„è·¯å¾„åœ°å€</span></div></pre></td></tr></table></figure>
<p>äº²èº«å®è·µçš„åŒå­¦åº”è¯¥æ¸…æ¥šï¼Œé…ç½®ä¿¡æ¯ä¾èµ–å¾ˆå…¶ä»–é¡¹ç›®è¿è¡Œç¯å¢ƒï¼Œéå¸¸ä¸çµæ´»ã€‚</p>
<p>â€‹<strong>ç¬¬äºŒï¼Œè¿è¡ŒPHP Webhookséœ€è¦LinuxæœåŠ¡å™¨æä¾›Webä¸PHPæœåŠ¡ï¼Œå½“æœåŠ¡å™¨é‡‡ç”¨Dockerè¿è¡Œç¯å¢ƒæ„å»ºæ—¶ï¼ŒPHP Webhookså°±æ— æ³•ç»§ç»­ä½¿ç”¨</strong></p>
<p>æœ€è¿‘å‡ å¹´ï¼ŒDockerå¤§è¡Œå…¶é“ï¼Œåœ¨DevOpsé¢†åŸŸå·²ç»æ˜¯é£ç”Ÿæ°´èµ·ã€‚æˆ‘ä»¬è‡ªå·±ç¼–æ’äº†ä¸€å¥—<a href="https://github.com/bravist/lnmp-docker" target="_blank" rel="external">Dockerè¿è¡Œèµ„æº</a>ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥åœ¨5åˆ†é’Ÿå†…å®Œæˆä¸€ä¸ªå®Œæ•´çš„PHP Webç¯å¢ƒã€‚æ¨èä¸ªäººç”¨æˆ·å»<a href="https://www.digitalocean.com/" target="_blank" rel="external">DigitalOcean</a> è´­ä¹°ä¸€å°VPSå®‰è£…CentOS7å¹¶å°è¯•ä½¿ç”¨Dockerã€‚è¿™é‡Œç®€è¦åœ°æè¿°ä¸€ä¸‹ç¼–æ’èµ„æºï¼š</p>
<p><img src="https://chenghuiyong.com/images/Webhooks/docker-ps.png" alt="docker-ps"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"># docker ps</div><div class="line"></div><div class="line">NAMES</div><div class="line"></div><div class="line">lnmpdocker_nginx_1 ## Nginx: Web æœåŠ¡å®¹å™¨</div><div class="line"></div><div class="line">lnmpdocker_php-fpm_1 ## PHP-FPM: PHPè„šæœ¬è¯­è¨€è§£é‡Šå™¨ï¼Œç”¨äºå¤„ç†Webä¸­çš„PHPè„šæœ¬è¯·æ±‚</div><div class="line"></div><div class="line">lnmpdocker_mariadb_1 ## MariaDB: Mysqlå¦ä¸€ä¸ªç‰ˆæœ¬ï¼Œæ•°æ®åº“ç®¡ç†ç³»ç»Ÿå®¹å™¨</div><div class="line"></div><div class="line">lnmpdocker_www_1 ## www: è™šæ‹Ÿä¸»æœºç›®å½•ï¼Œä¹Ÿå³æ˜¯CentOSå®¿ä¸»æœºä¸Šé¡¹ç›®æºç ç›®å½•</div><div class="line"></div><div class="line">lnmpdocker_redis_1 ## Redis: Redisç¼“å­˜æœåŠ¡å®¹å™¨</div></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„æ¯ä¸ªå®¹å™¨éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è™šæ‹ŸæœåŠ¡å™¨ï¼Œç”¨äºæä¾›ä¸åŒçš„æœåŠ¡ã€‚æˆ‘ä»¬åœ¨CentOS 7å®¿ä¸»æœºï¼ˆç›¸å¯¹äºDockerå®¹å™¨ï¼‰ä¸Šå¹¶æœªå®‰è£…PHPè„šæœ¬è§£é‡Šå™¨ï¼Œæ­¤æ—¶å°±æ— æ³•è¿è¡ŒPHPç‰ˆæœ¬çš„Gitlab Webhooksã€‚</p>
<p>ä¸ºæé«˜Gitlabæºç è‡ªåŠ¨éƒ¨ç½²çš„çµæ´»æ€§å’Œå¯ç”¨æ€§ï¼Œæ¨èä½¿ç”¨NodeJSç‰ˆæœ¬çš„Gitlab Webhooksã€‚ä¸‹é¢è¯¦ç»†è¯´æ˜åœ¨CentOS 7ä¸­åˆ©ç”¨NodeJSç‰ˆæœ¬çš„Gitlab Webhookså®Œæˆæºç è‡ªåŠ¨éƒ¨ç½²ã€‚</p>
<h4 id="1-å®‰è£…Nodeç¯å¢ƒ"><a href="#1-å®‰è£…Nodeç¯å¢ƒ" class="headerlink" title="1. å®‰è£…Nodeç¯å¢ƒ"></a>1. å®‰è£…Nodeç¯å¢ƒ</h4><p>æ¨èä½¿ç”¨Nodeç‰ˆæœ¬ç®¡ç†å·¥å…·<a href="https://github.com/creationix/nvm" target="_blank" rel="external">nvm</a>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">## ä½¿ç”¨curlå·¥å…·ä¸‹è½½å®‰è£…</div><div class="line">$ wget -qO- https://raw.githubusercontent.com/creationix/nvm/v0.33.1/install.sh | bash</div><div class="line"></div><div class="line">## åœ¨å½“å‰çª—å£ä½¿ç”¨nvm</div><div class="line">$ source ~/.bash_profile</div><div class="line"></div><div class="line">## æŸ¥çœ‹è¿œç¨‹ä»“åº“Nodeç‰ˆæœ¬</div><div class="line">$ nvm ls-remote</div><div class="line"></div><div class="line">## é€‰æ‹©Nodeç‰ˆæœ¬æ‰§è¡Œå®‰è£…</div><div class="line">$ nvm install v7.8.0</div><div class="line"></div><div class="line">## æŸ¥çœ‹å·²å®‰è£…Nodeç¯å¢ƒ</div><div class="line">$ node -v</div></pre></td></tr></table></figure>
<p>æœ€æ–°ç‰ˆæœ¬Nodeå·²ç»è‡ªåŠ¨å®‰è£…äº†åŒ…ç®¡ç†å·¥å…·<code>npm</code>ï¼Œå›½å†…ç”¨æˆ·æ¨èä½¿ç”¨æ·˜å®çš„é•œåƒå·¥å…·<code>cnpm</code>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">## ä½¿ç”¨cnpmæ›¿æ¢npm</div><div class="line">$ npm install -g cnpm --registry=https://registry.npm.taobao.org</div></pre></td></tr></table></figure>
<h4 id="2-å®‰è£…NodeJS-Gitlabhookæ‰©å±•åŒ…"><a href="#2-å®‰è£…NodeJS-Gitlabhookæ‰©å±•åŒ…" class="headerlink" title="2. å®‰è£…NodeJS Gitlabhookæ‰©å±•åŒ…"></a>2. å®‰è£…NodeJS Gitlabhookæ‰©å±•åŒ…</h4><p>è¿›å…¥NodeJSåŒ…ç®¡ç†åœ¨çº¿ä»“åº“<a href="https://www.npmjs.com/" target="_blank" rel="external">npmjs</a>ï¼Œæœç´¢<code>gitlabhook</code>ï¼Œå¯ä»¥æŸ¥çœ‹ç›¸å…³é…ç½®ä¿¡æ¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">## å…¨å±€å®‰è£…gitlabhook</div><div class="line">$ npm install --global gitlabhook</div><div class="line"></div><div class="line">##æŸ¥çœ‹gitlabhookå®‰è£…è·¯å¾„</div><div class="line">$ npm</div></pre></td></tr></table></figure>
<p>é…ç½®<code>gitlabhook.conf</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">##è¿›å…¥ ~/.nvm/versions/node/v7.8.0/lib/node_modules</div><div class="line">$ cd ~/.nvm/versions/node/v7.8.0/lib/node_modules/gitlabhook</div><div class="line"></div><div class="line">##å¤åˆ¶gitlabhook.confè‡³/etc/gitlabhook.conf</div><div class="line">$ cp gitlabhook.conf /etc/gitlabhook.conf</div><div class="line"></div><div class="line">## ç¼–è¾‘/etc/gitlabhook.conf</div><div class="line">$ vi /etc/gitlabhook.conf</div><div class="line"></div><div class="line">&#123;</div><div class="line">  &quot;tasks&quot;: &#123;</div><div class="line">    &quot;*&quot;: [</div><div class="line">      &quot;echo &apos;GitLab Server: %s&apos; &gt; /tmp/gitlabhook.tmp&quot;,</div><div class="line">      &quot;echo &apos;Repository: %r&apos; &gt;&gt; /tmp/gitlabhook.tmp&quot;,</div><div class="line">      &quot;echo &apos;Repository branch: %b&apos; &gt;&gt; /tmp/gitlabhook.tmp&quot;,</div><div class="line">      &quot;echo &apos;Repository remote url: %g&apos; &gt;&gt; /tmp/gitlabhook.tmp&quot;,</div><div class="line">      &quot;echo $(date) &gt;&gt; /tmp/gitlabhook.tmp&quot;,</div><div class="line">      &quot;cd /mnt/www/%r &gt;&gt; /tmp/gitlabhook.tmp&quot;,</div><div class="line">      &quot;sudo -u www git checkout develop &gt;&gt; /tmp/gitlabhook.tmp&quot;,</div><div class="line">      &quot;sudo -u www git pull origin develop &gt;&gt; /tmp/gitlabhook.tmp&quot;</div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  &quot;keep&quot;:false</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œç‰¹åˆ«æé†’ï¼š</p>
<ul>
<li>CentOS å®¿ä¸»æœºä¸Šéœ€è¦å®‰è£…gitç‰ˆæœ¬ç®¡ç†å·¥å…·<code>yum install -y git</code></li>
<li>CentOS å®¿ä¸»æœºä¸Šé»˜è®¤è¿˜æ˜¯éœ€è¦é€šè¿‡gitå‘½ä»¤å»è¿œç¨‹å…‹éš†ä»“åº“ï¼ŒCentOSå®¿ä¸»æœºéœ€è¦é…ç½®SSH-Keyå¹¶åœ¨gitlabä¸­è¿›è¡Œé…ç½®ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼šâ€œæ— æƒé™å…‹éš†ä»“åº“â€</li>
<li>éœ€è¦ä½¿ç”¨CentOS å®¿ä¸»æœºä¸Šçš„è™šæ‹Ÿä¸»æœºç›®å½•çš„æ‹¥æœ‰è€…å»ä½¿ç”¨gitå‘½ä»¤ï¼Œæ¯”å¦‚é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨<code>www</code>ç”¨æˆ·å»å…‹éš†ä»“åº“</li>
<li>æ³¨æ„åœ¨ä½ çš„CentOS å®¿ä¸»æœºä¸Šç¡®è®¤å…‹éš†ä»“åº“çš„ç‰ˆæœ¬ï¼Œå¦‚æœæ˜¯æµ‹è¯•ç¯å¢ƒå»ºè®®ä½¿ç”¨<code>develop</code>åˆ†æ”¯ï¼Œå¦‚æœæ˜¯ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨<code>master</code>åˆ†æ”¯</li>
</ul>
<h4 id="3-å®‰è£…NodeJS-è¿›ç¨‹ç®¡ç†å·¥å…·PM2"><a href="#3-å®‰è£…NodeJS-è¿›ç¨‹ç®¡ç†å·¥å…·PM2" class="headerlink" title="3. å®‰è£…NodeJS è¿›ç¨‹ç®¡ç†å·¥å…·PM2"></a>3. å®‰è£…NodeJS è¿›ç¨‹ç®¡ç†å·¥å…·PM2</h4><p>ä½¿ç”¨NodeJS çš„è¿›ç¨‹ç®¡ç†å·¥å…·<a href="http://pm2.keymetrics.io/" target="_blank" rel="external">PM2</a>æ–¹ä¾¿ç›‘æ§å¹¶ç®¡ç†NodeJSè¿›ç¨‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">## å…¨å±€å®‰è£…PM2</div><div class="line"></div><div class="line">$ npm install --global pm2</div><div class="line"></div><div class="line">## æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹</div><div class="line"></div><div class="line">$ pm2 list</div><div class="line"></div><div class="line">## ç›‘æ§å½“å‰è¿è¡Œçš„è¿›ç¨‹</div><div class="line"></div><div class="line">$ pm2 monit</div></pre></td></tr></table></figure>
<h4 id="4-è¿è¡ŒNodeJS-Gitlabhook"><a href="#4-è¿è¡ŒNodeJS-Gitlabhook" class="headerlink" title="4.  è¿è¡ŒNodeJS Gitlabhook"></a>4.  è¿è¡ŒNodeJS Gitlabhook</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">## æ‰§è¡Œgitlab-server.js</div><div class="line"></div><div class="line">$ pm2 start ~/.nvm/versions/node/v7.8.0/lib/node_modules/gitlabhook/gitlabhook-server.js</div><div class="line"></div><div class="line">## æŸ¥çœ‹gitlab-serverç«¯å£æ˜¯å¦å¼€å¯</div><div class="line"></div><div class="line">$ netstat -tunlp | grep 3420</div><div class="line"></div><div class="line">## åœ¨æœ¬åœ°ç¡®è®¤è¿œç¨‹3420ç«¯å£æ˜¯å¦å¯è®¿é—®</div><div class="line"></div><div class="line">$ telnet 138.68.24.82 3420</div><div class="line"></div><div class="line">Trying 138.68.24.82...</div><div class="line">Connected to 138.68.24.82.</div><div class="line">Escape character is &apos;^]&apos;.</div><div class="line"></div><div class="line">##å¦‚æœçœ‹åˆ°ä¸Šé¢çš„ä¿¡æ¯ï¼Œè¡¨ç¤ºGitlab Serverå·²ç»å¼€å§‹è¿è¡Œï¼Œå¦‚æœæ²¡æœ‰ï¼Œå¯ä»¥æŸ¥çœ‹CentOSé˜²ç«å¢™æ˜¯å¦å…è®¸3420ç«¯å£è®¿é—®</div></pre></td></tr></table></figure>
<h4 id="5-åœ¨Gitlabä»“åº“ä¸­é…ç½®Webhooks"><a href="#5-åœ¨Gitlabä»“åº“ä¸­é…ç½®Webhooks" class="headerlink" title="5. åœ¨Gitlabä»“åº“ä¸­é…ç½®Webhooks"></a>5. åœ¨Gitlabä»“åº“ä¸­é…ç½®Webhooks</h4><p>ç™»å½•ä½ çš„Gitlabé¡¹ç›®ç®¡ç†åå°ï¼Œæœç´¢<code>Webhooks</code>å¹¶æ·»åŠ Push eventsï¼ˆä¸åŒç‰ˆæœ¬çš„Gitlabé…ç½®Webhookså¯èƒ½ä¸ä¸€æ ·ï¼‰ã€‚</p>
<p><img src="https://chenghuiyong.com/images/Webhooks/wehooks-1.png" alt="webhooks-1"></p>
<p><img src="https://chenghuiyong.com/images/Webhooks/wehooks-2.png" alt="webhooks"></p>
<h4 id="6-æäº¤ç‰ˆæœ¬å¹¶æµ‹è¯•"><a href="#6-æäº¤ç‰ˆæœ¬å¹¶æµ‹è¯•" class="headerlink" title="6. æäº¤ç‰ˆæœ¬å¹¶æµ‹è¯•"></a>6. æäº¤ç‰ˆæœ¬å¹¶æµ‹è¯•</h4><p>åœ¨ä½ çš„æœ¬åœ°å¼€å‘ä»“åº“ä¸­ï¼Œæ‰§è¡Œ<code>git push</code>ï¼Œè¿›å…¥CentOSæœåŠ¡å™¨æ£€æŸ¥ä»£ç æ˜¯å¦è‡ªåŠ¨åŒæ­¥ã€‚</p>
<p>ä½¿ç”¨NodeJSç‰ˆæœ¬çš„Gitlab Webhooksè§£é™¤äº†ä¸WebæœåŠ¡å™¨å¼ºä¾èµ–å…³ç³»ï¼ŒåŒæ—¶æœåŠ¡å™¨è¿è¡Œç¯å¢ƒæºç ä¿æŒå¹²å‡€çµæ´»ï¼Œéå¸¸é€‚åˆDockerçš„è¿è¡Œç¯å¢ƒã€‚å¦å¤–ï¼Œæ­¤é¡¹ç›®ä¸ä»…ä»…å¯ä»¥è¿è¡Œåœ¨Gitlabç‰ˆæœ¬ä»“åº“ä¸­ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥è¿è¡Œåœ¨Githubã€Codingç­‰è¿è¡Œç¯å¢ƒä¸­ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;â€‹åœ¨æˆ‘çš„&lt;a href=&quot;https://github.com/bravist&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Github&lt;/a&gt;ä¸­æœ‰ä¸¤ä¸ªå…³äºGitlabä»£ç è‡ªåŠ¨éƒ¨ç½²çš„é¡¹ç›®ï¼Œä¸€ä¸ªæ˜¯PHPç‰ˆæœ¬çš„&lt;a href=&quot;https://github.
    
    </summary>
    
    
      <category term="Git" scheme="https://www.chenghuiyong.com/tags/Git/"/>
    
      <category term="NodeJS" scheme="https://www.chenghuiyong.com/tags/NodeJS/"/>
    
      <category term="Webhooks" scheme="https://www.chenghuiyong.com/tags/Webhooks/"/>
    
      <category term="Gitlab" scheme="https://www.chenghuiyong.com/tags/Gitlab/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨macOSç»ˆç«¯æˆ–è€…iTerm2ä¸­ä½¿ç”¨Shadowsocksç•…æ¸¸World Web</title>
    <link href="https://www.chenghuiyong.com/2017-03-31/showdowsocks-for-iterm2.html"/>
    <id>https://www.chenghuiyong.com/2017-03-31/showdowsocks-for-iterm2.html</id>
    <published>2017-03-31T00:13:42.000Z</published>
    <updated>2017-04-21T03:35:55.000Z</updated>
    
    <content type="html"><![CDATA[<p>éšç€Webå‰ç«¯æ¡†æ¶ï¼ˆBootstrapã€Reactã€Vue.jsï¼‰ã€åŒ…ç®¡ç†å·¥å…·ï¼ˆGulpè‡ªåŠ¨åŒ–ä»»åŠ¡ã€Browsersyncæµè§ˆå™¨åŒæ­¥ã€Babelï¼šJavaScriptç¼–è¯‘å·¥å…·ã€Webpackï¼šæ¨¡å—æ‰“åŒ…ï¼‰ã€æ¨¡å—çš„ç››è¡Œï¼Œå‰ç«¯å¼€å‘ä¹Ÿè¶Šæ¥è¶Šåå·¥ç¨‹åŒ–ã€‚<a href="https://www.npmjs.com/" target="_blank" rel="external">https://www.npmjs.com/</a> å·ç§°å·²ç»æ˜¯ä¸–ç•Œä¸Šæœ€å¤§çš„åŒ…ç®¡ç†ä»“åº“ï¼Œåœ¨å›½å†…ï¼Œè¦å®‰è£…è¿™äº›ä¾èµ–åŒ…ï¼Œç»å¸¸ä¼šå‡ºç°502è¿æ¥è¶…æ—¶æƒ…å†µã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªæœ‰å¿—å‘çš„ç¨‹åºçŒ¿ï¼Œæ›´å¥½åœ°ä½¿ç”¨Google Searchåœ¨è§£å†³æŠ€æœ¯é—®é¢˜ã€éš¾é¢˜å¯èƒ½æ˜¯å¿…å¤‡ä¸“ä¸šæŠ€èƒ½ï¼Œå¦å¤–ï¼Œåœ¨å¹³æ—¶å­¦ä¹ çš„å®½åº¦å’Œæ·±åº¦æ–¹é¢ï¼Œä¿æŒä¸å›½å¤–çš„åœ¨çº¿äº¤æµç¤¾åŒºã€è§†é¢‘å­¦ä¹ å¹³å°ã€ç‰›äººçš„twitterã€facebookäº’åŠ¨ä¹Ÿæ˜¯éå¸¸é‡è¦ã€‚åšåˆ°è¿™äº›å¿…é¡»å¾—â€œç¿»å¢™å‡ºå»â€ - è‡ªæè…°åŒ…æ­å»ºShadowsocksæœåŠ¡å™¨ã€‚<a href="https://php-rmcr7.rhcloud.com/shadowsocks-server/" target="_blank" rel="external">æ•™ä½ å¦‚ä½•æ­å»ºè‡ªå·±çš„ShadowsocksæœåŠ¡å™¨</a> è¿™ç¯‡æ–‡ç« è¯¦ç»†æè¿°äº†å¦‚ä½•æ­å»ºè‡ªå·±çš„ShadowsocksæœåŠ¡å™¨ï¼Œå¦å¤–æ¨èä½¿ç”¨<a href="https://www.banwagong.me" target="_blank" rel="external">æ¬ç“¦å·¥VPS</a> VPSï¼Œå®ƒä¸“é—¨é’ˆå¯¹å›½å†…ç½‘ç»œè¿›è¡Œäº†ä¼˜åŒ–ã€‚</p>
<p>æˆéƒ½å¸‚ç”µä¿¡Pingçš„é€Ÿåº¦</p>
<p><img src="https://www.chenghuiyong.com/images/macOS-iTerm2/ping.png" alt=""></p>
<p>æˆåŠŸå®‰è£…äº†Shadowsocksåï¼Œéœ€è¦åœ¨macOSä¸­å®‰è£…å¦ä¸€ä¸ªä»£ç†å·¥å…·<a href="https://github.com/shadowsocks/ShadowsocksX-NG" target="_blank" rel="external">ShadowsocksX-NG</a></p>
<p><img src="https://www.chenghuiyong.com/images/macOS-iTerm2/shadowsocks.png" alt=""></p>
<p>æ­£ç¡®é…ç½®åï¼Œä½ çš„æµè§ˆå™¨åº”è¯¥å°±å¯ä»¥è®¿é—®å›½å¤–çš„ç½‘ç»œäº†ã€‚</p>
<p>æ¥ä¸‹æ¥è¦é…ç½®çš„å°±æ˜¯å¦‚ä½•åœ¨macOSç»ˆç«¯æˆ–è€…iTerm2ä½¿ç”¨Shadowsocksã€‚</p>
<h1 id="åœ¨ShadowsocksX-NGä¸­ï¼Œæ‹·è´ç»ˆç«¯ä»£ç†è„šæœ¬"><a href="#åœ¨ShadowsocksX-NGä¸­ï¼Œæ‹·è´ç»ˆç«¯ä»£ç†è„šæœ¬" class="headerlink" title="åœ¨ShadowsocksX-NGä¸­ï¼Œæ‹·è´ç»ˆç«¯ä»£ç†è„šæœ¬"></a>åœ¨ShadowsocksX-NGä¸­ï¼Œæ‹·è´ç»ˆç«¯ä»£ç†è„šæœ¬</h1><p><img src="https://www.chenghuiyong.com/images/macOS-iTerm2/Copy-to-local.png" alt=""></p>
<p>å¤åˆ¶ä»£ç†è„šæœ¬</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">export http_proxy=http://127.0.0.1:1087;</div><div class="line">export https_proxy=http://127.0.0.1:1087;</div></pre></td></tr></table></figure>
<h1 id="æ·»åŠ ç»ˆç«¯ä»£ç†è„šæœ¬åˆ°-bash-profileæ–‡ä»¶"><a href="#æ·»åŠ ç»ˆç«¯ä»£ç†è„šæœ¬åˆ°-bash-profileæ–‡ä»¶" class="headerlink" title="æ·»åŠ ç»ˆç«¯ä»£ç†è„šæœ¬åˆ°.bash_profileæ–‡ä»¶"></a>æ·»åŠ ç»ˆç«¯ä»£ç†è„šæœ¬åˆ°<code>.bash_profile</code>æ–‡ä»¶</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$ sudo vi ~/.bash_profile</div><div class="line"></div><div class="line">...</div><div class="line">#åœ¨æ–‡ä»¶çš„æœ«å°¾åŠ ä¸Šç»ˆç«¯ä»£ç†è„šæœ¬</div><div class="line">export http_proxy=http://127.0.0.1:1087;</div><div class="line">export https_proxy=http://127.0.0.1:1087;</div><div class="line"></div><div class="line">$ source ~/.bash_profile</div></pre></td></tr></table></figure>
<p><img src="https://www.chenghuiyong.com/images/macOS-iTerm2/bash_profile.png" alt=""></p>
<h1 id="é‡å¯ç»ˆç«¯æˆ–iTerm2ï¼Œä½¿ç”¨curl-google-com-å‘½ä»¤æµ‹è¯•æ˜¯å¦æˆåŠŸï¼Œä½¿ç”¨httpå‘½ä»¤æµ‹è¯•ï¼š"><a href="#é‡å¯ç»ˆç«¯æˆ–iTerm2ï¼Œä½¿ç”¨curl-google-com-å‘½ä»¤æµ‹è¯•æ˜¯å¦æˆåŠŸï¼Œä½¿ç”¨httpå‘½ä»¤æµ‹è¯•ï¼š" class="headerlink" title="é‡å¯ç»ˆç«¯æˆ–iTerm2ï¼Œä½¿ç”¨curl google.com å‘½ä»¤æµ‹è¯•æ˜¯å¦æˆåŠŸï¼Œä½¿ç”¨httpå‘½ä»¤æµ‹è¯•ï¼š"></a>é‡å¯ç»ˆç«¯æˆ–iTerm2ï¼Œä½¿ç”¨<code>curl google.com</code> å‘½ä»¤æµ‹è¯•æ˜¯å¦æˆåŠŸï¼Œä½¿ç”¨<code>http</code>å‘½ä»¤æµ‹è¯•ï¼š</h1><p><img src="https://www.chenghuiyong.com/images/macOS-iTerm2/google.png" alt=""></p>
<p>å‘½ä»¤è¡Œè®¿é—® <code>google.com</code></p>
<p><img src="https://www.chenghuiyong.com/images/macOS-iTerm2/facebook.png" alt=""></p>
<p>å‘½ä»¤è¡Œè®¿é—® <code>facebook.com</code></p>
<h1 id="æµ‹è¯•yarn-installã€npm-install-å®‰è£…å‰ç«¯ä¾èµ–"><a href="#æµ‹è¯•yarn-installã€npm-install-å®‰è£…å‰ç«¯ä¾èµ–" class="headerlink" title="æµ‹è¯•yarn installã€npm install å®‰è£…å‰ç«¯ä¾èµ–"></a>æµ‹è¯•<code>yarn install</code>ã€<code>npm install</code> å®‰è£…å‰ç«¯ä¾èµ–</h1><p><img src="https://www.chenghuiyong.com/images/macOS-iTerm2/yarn.png" alt=""></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;éšç€Webå‰ç«¯æ¡†æ¶ï¼ˆBootstrapã€Reactã€Vue.jsï¼‰ã€åŒ…ç®¡ç†å·¥å…·ï¼ˆGulpè‡ªåŠ¨åŒ–ä»»åŠ¡ã€Browsersyncæµè§ˆå™¨åŒæ­¥ã€Babelï¼šJavaScriptç¼–è¯‘å·¥å…·ã€Webpackï¼šæ¨¡å—æ‰“åŒ…ï¼‰ã€æ¨¡å—çš„ç››è¡Œï¼Œå‰ç«¯å¼€å‘ä¹Ÿè¶Šæ¥è¶Šåå·¥ç¨‹åŒ–ã€‚&lt;a href=&quot;https:/
    
    </summary>
    
    
      <category term="iTerm2" scheme="https://www.chenghuiyong.com/tags/iTerm2/"/>
    
      <category term="Shadowsocks" scheme="https://www.chenghuiyong.com/tags/Shadowsocks/"/>
    
  </entry>
  
  <entry>
    <title>å®‰è£…GitæœåŠ¡&amp;ä½¿ç”¨Gitosisç®¡ç†æˆå‘˜ã€é¡¹ç›®å¹¶åšé¡¹ç›®æˆæƒ</title>
    <link href="https://www.chenghuiyong.com/2017-03-28/gitosis.html"/>
    <id>https://www.chenghuiyong.com/2017-03-28/gitosis.html</id>
    <published>2017-03-27T16:07:28.000Z</published>
    <updated>2017-04-06T12:25:14.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>è¿™æ˜¯ä¸€ç¯‡å®é™…çš„æ“ä½œæ–‡æ¡£ï¼Œé‡Œé¢çš„å¤§éƒ¨åˆ†å›¾éƒ½æ˜¯è‡ªå·±äº²æ‰‹æˆªå±ï¼ŒåŠ›æ±‚è¾¾åˆ°çœŸå®å¹¶å¸Œæœ›å¸®åŠ©åˆ°æ›´å¤šçš„é‡åˆ°ç±»ä¼¼é—®é¢˜çš„å›°æƒ‘è€…ã€‚å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ç›´æ¥åœ¨æ–‡ç« æœ€ä¸‹é¢è”ç³»åˆ°æˆ‘ï¼Œä¹Ÿæ¬¢è¿æ‹ç –ã€‚</p>
</blockquote>
<h1 id="å¼„æ¸…æ¥šå…³é”®è¯çœ¼ä¸æ¦‚å¿µ"><a href="#å¼„æ¸…æ¥šå…³é”®è¯çœ¼ä¸æ¦‚å¿µ" class="headerlink" title="å¼„æ¸…æ¥šå…³é”®è¯çœ¼ä¸æ¦‚å¿µ"></a>å¼„æ¸…æ¥šå…³é”®è¯çœ¼ä¸æ¦‚å¿µ</h1><p><strong><em>è£¸ä»“åº“ï¼ˆbare repositoryï¼‰</em></strong></p>
<blockquote>
<p> å³ä¸€ä¸ªæ²¡æœ‰å½“å‰å·¥ä½œç›®å½•çš„ä»“åº“ã€‚å› ä¸ºè¯¥ä»“åº“åªæ˜¯ä¸€ä¸ªåˆä½œåª’ä»‹ï¼Œæ‰€ä»¥ä¸éœ€è¦ä»ç¡¬ç›˜ä¸Šå–å‡ºæœ€æ–°ç‰ˆæœ¬çš„å¿«ç…§ï¼›ä»“åº“é‡Œå­˜æ”¾çš„ä»…ä»…æ˜¯ Git çš„æ•°æ®ã€‚ç®€å•åœ°è¯´ï¼Œè£¸ä»“åº“å°±æ˜¯ä½ å·¥ä½œç›®å½•ä¸­ .git å­ç›®å½•å†…çš„å†…å®¹ã€‚</p>
</blockquote>
<p>è¡¥å……ä¸€ä¸‹ï¼šç›´æ¥ä¸Šå›¾ï¼Œç®€å•æ˜äº†ã€‚</p>
<p><img src="https://chenghuiyong.com/images/gitosis/-è£¸ä»“åº“.png" alt="Alt text"></p>
<p><strong><em>è¿œç¨‹ä»“åº“</em></strong></p>
<blockquote>
<p>è¿œç¨‹ä»“åº“é€šå¸¸åªæ˜¯ä¸€ä¸ªè£¸ä»“åº“ï¼ˆbare repositoryï¼‰</p>
</blockquote>
<p><img src="https://chenghuiyong.com/images/gitosis/-æœ¬åœ°ç›®å½•ä¸ä»“åº“-2.png" alt="Alt text"></p>
<p><img src="https://chenghuiyong.com/images/gitosis/-æš‚å­˜åŒºåŸç†.png" alt="Alt text"></p>
<p>åœ¨ Git å†…éƒ½åªæœ‰ä¸‰ç§çŠ¶æ€ï¼šå·²æäº¤ï¼ˆcommittedï¼‰ï¼Œå·²ä¿®æ”¹ï¼ˆmodifiedï¼‰å’Œå·²æš‚å­˜ï¼ˆstagedï¼‰ã€‚å·²æäº¤è¡¨ç¤ºè¯¥æ–‡ä»¶å·²ç»è¢«å®‰å…¨åœ°ä¿å­˜åœ¨æœ¬åœ°ä»“åº“äº†ï¼›å·²ä¿®æ”¹è¡¨ç¤ºä¿®æ”¹äº†æŸä¸ªæ–‡ä»¶ï¼Œä½†è¿˜æ²¡æœ‰æäº¤ä¿å­˜ï¼›å·²æš‚å­˜è¡¨ç¤ºæŠŠå·²ä¿®æ”¹çš„æ–‡ä»¶æ”¾åœ¨ä¸‹æ¬¡æäº¤æ—¶è¦ä¿å­˜çš„æ¸…å•ä¸­ã€‚ ç»“åˆå®é™…çš„å·¥ä½œé¡¹ç›®ï¼Œæ¥è§£é‡Šä¸‹ä»¥ä¸‹æ¦‚å¿µã€‚<br><strong><em>Git å·¥ä½œç›®å½•</em></strong></p>
<p>å°±æ˜¯ä¸‹å›¾ä¸­çš„é™¤äº†.gitç›®å½•çš„å…¶ä»–çš„æ–‡ä»¶ä¸ç›®å½•ã€‚</p>
<p><strong><em>æš‚å­˜åŒºåŸŸ</em></strong></p>
<p>å°±æ˜¯å®é™…æ“ä½œæ—¶ï¼Œä½¿ç”¨git add å‘½ä»¤å°†æ–°å¢ï¼ˆä¿®æ”¹ï¼‰çš„æ–‡ä»¶æ·»åŠ åˆ°ä¸€ä¸ªæ§åˆ¶åŒºåŸŸçš„æ¸…å•ã€‚</p>
<p><strong>æœ¬åœ°ä»“åº“</strong></p>
<p>å°±æ˜¯ä¸‹å›¾ä¸­çš„.gitç›®å½•çš„å…¶ä»–çš„æ–‡ä»¶ä¸ç›®å½•ã€‚</p>
<p><img src="https://chenghuiyong.com/images/gitosis/-æœ¬åœ°ç›®å½•ä¸ä»“åº“.png" alt="å›¾ä¸‰"></p>
<h1 id="Gitå®‰è£…"><a href="#Gitå®‰è£…" class="headerlink" title="Gitå®‰è£…"></a>Gitå®‰è£…</h1><p>ä»¥æˆ‘çš„ä¸€å°CentOSä¸ºä¾‹ï¼Œåšä¸‹å®é™…å®‰è£…è¿‡ç¨‹ã€‚<br><img src="https://chenghuiyong.com/images/gitosis/-æœ¬åœ°ç¯å¢ƒ.png" alt="Alt text"></p>
<p>å®‰è£…gitä¸»è¦åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯é€šè¿‡ç¼–è¯‘æºä»£ç æ¥å®‰è£…ï¼›å¦ä¸€ç§æ˜¯ä½¿ç”¨ä¸ºç‰¹å®šå¹³å°é¢„ç¼–è¯‘å¥½çš„å®‰è£…åŒ…ã€‚æˆ‘é€‰æ‹©ç¬¬äºŒç§å’¯ã€‚ç¬¬ä¸€ç§å®‰è£…æ–¹å¼<a href="http://git.oschina.net/progit/1-%E8%B5%B7%E6%AD%A5.html#1.4-%E5%AE%89%E8%A3%85-Git" target="_blank" rel="external">å‚è€ƒè¿™é‡Œ</a></p>
<p><img src="https://chenghuiyong.com/images/gitosis/-ç‰¹å®šå¹³å°é¢„ç¼–è¯‘å¥½çš„å®‰è£…åŒ….png" alt="Alt text"></p>
<p><img src="https://chenghuiyong.com/images/gitosis/-å®‰è£…ç»“æŸ.png" alt="Alt text"></p>
<h1 id="Gitosisç®¡ç†gitç”¨æˆ·ä¸æˆæƒ"><a href="#Gitosisç®¡ç†gitç”¨æˆ·ä¸æˆæƒ" class="headerlink" title="Gitosisç®¡ç†gitç”¨æˆ·ä¸æˆæƒ"></a>Gitosisç®¡ç†gitç”¨æˆ·ä¸æˆæƒ</h1><p>å¦‚æœä½ çš„é¡¹ç›®æ˜¯å¤šäººå¼€å‘ï¼Œå»ºè®®å°±ä½¿ç”¨Gitosisè¿›è¡Œäººå‘˜æ·»åŠ ä¸é¡¹ç›®æˆæƒã€‚å®‰è£…Gitosisç½‘ä¸Šèµ„æ–™æ¯”æ¯”çš†æ˜¯ï¼Œæˆ‘è‡ªå·±ä¹Ÿè¸©è¿‡å¾ˆå¤šå‘ã€‚ä½†æ˜¯æˆ‘å»ºè®®æ˜¯å…ˆçœ‹çœ‹ç½‘ä¸Šçš„èµ„æ–™ï¼Œæœ€åä»”ç»†é˜…è¯»<a href="https://github.com/res0nat0r/gitosis" target="_blank" rel="external">gitosis</a>åœ¨Githubä¸Šé¢çš„å®‰è£…æµç¨‹ï¼Œä¸‹é¢ç»“åˆè‡ªå·±çš„æœç´¢é˜…è¯»ä¸å®‰è£…ç»å†ï¼Œä¸€æ­¥ä¸€æ­¥è®°å½•æˆ‘çš„å®‰è£…è¿‡ç¨‹ã€‚</p>
<h3 id="1ã€Gitosis-çš„å·¥ä½œä¾èµ–äºæŸäº›-Python-å·¥å…·ï¼Œæ‰€ä»¥é¦–å…ˆè¦å®‰è£…-Python-çš„-setuptools-åŒ…"><a href="#1ã€Gitosis-çš„å·¥ä½œä¾èµ–äºæŸäº›-Python-å·¥å…·ï¼Œæ‰€ä»¥é¦–å…ˆè¦å®‰è£…-Python-çš„-setuptools-åŒ…" class="headerlink" title="1ã€Gitosis çš„å·¥ä½œä¾èµ–äºæŸäº› Python å·¥å…·ï¼Œæ‰€ä»¥é¦–å…ˆè¦å®‰è£… Python çš„ setuptools åŒ…"></a>1ã€Gitosis çš„å·¥ä½œä¾èµ–äºæŸäº› Python å·¥å…·ï¼Œæ‰€ä»¥é¦–å…ˆè¦å®‰è£… Python çš„ setuptools åŒ…</h3><p><img src="https://chenghuiyong.com/images/gitosis/-python-setuptools.png" alt="Alt text"></p>
<h3 id="2ã€ä»-Gitosis-é¡¹ç›®ä¸»é¡µå…‹éš†å¹¶å®‰è£…"><a href="#2ã€ä»-Gitosis-é¡¹ç›®ä¸»é¡µå…‹éš†å¹¶å®‰è£…" class="headerlink" title="2ã€ä» Gitosis é¡¹ç›®ä¸»é¡µå…‹éš†å¹¶å®‰è£…"></a>2ã€ä» Gitosis é¡¹ç›®ä¸»é¡µå…‹éš†å¹¶å®‰è£…</h3><p>æœ‰å¯èƒ½ä½ cloneä¸æˆåŠŸï¼ŒæŠ¥socketè¿æ¥å¤±è´¥<br><img src="https://chenghuiyong.com/images/gitosis/-1440148225122.png" alt="Alt text"></p>
<p>é‚£ä¹ˆï¼Œä½ å¯ä»¥å»Githubé¡¹ç›®ä¸»é¡µå…‹éš†</p>
<p><img src="https://chenghuiyong.com/images/gitosis/-1440148325972.png" alt="Alt text"></p>
<p>å¯æ˜¯ï¼Œå…‹éš†Githubä¸»é¡µä¹ŸæŠ¥é”™ï¼Œè¿™æ—¶éœ€è¦åœ¨ä½ çš„æœºå™¨ä¸Šä½¿ç”¨<code>ssh-keygen</code>å‘½ä»¤ç”Ÿæˆå…¬é’¥ä¸ç§é’¥ï¼Œç„¶åå‘å¸ƒåˆ°Githubä¸Šå»ã€‚</p>
<p><img src="https://chenghuiyong.com/images/gitosis/-1440148460982.png" alt="Alt text"><br>å°†ç”Ÿæˆçš„å…¬é’¥å‘å¸ƒåˆ°Githubï¼ˆä½ å¾—æœ‰ä¸ªGithubè´¦å·å‘€ï¼‰ä¸Šã€‚<br><img src="https://chenghuiyong.com/images/gitosis/-1440148698397.png" alt="Alt text"><br>æ·»åŠ æˆåŠŸåçš„æ•ˆæœ<br><img src="https://chenghuiyong.com/images/gitosis/-1440148904479.png" alt="Alt text"></p>
<p>å†æ¬¡å…‹éš†æ²¡æœ‰é—®é¢˜<br><img src="https://chenghuiyong.com/images/gitosis/-1440148967209.png" alt="Alt text"></p>
<p>å®‰è£…å‡ ä¸ªä¾› Gitosis ä½¿ç”¨çš„å·¥å…·<br><img src="https://chenghuiyong.com/images/gitosis/-1440149048737.png" alt="Alt text"></p>
<h3 id="3ã€åˆå§‹åŒ–Gitosis"><a href="#3ã€åˆå§‹åŒ–Gitosis" class="headerlink" title="3ã€åˆå§‹åŒ–Gitosis"></a>3ã€åˆå§‹åŒ–Gitosis</h3><p>åˆ›å»ºç”¨äºç®¡ç†æˆ‘ä»¬çš„Gitosisé¡¹ç›®çš„ç”¨æˆ·ï¼ˆ<a href="https://github.com/res0nat0r/gitosis" target="_blank" rel="external">Githubä¸»é¡µ</a>æœ‰å…³äºè¿™å—çš„ä»‹ç»ï¼Œä¸åŒçš„Linuxç‰ˆæœ¬åˆ›å»ºç”¨æˆ·æ˜¯ä¸ä¸€æ ·çš„ï¼‰</p>
<p>åˆ‡æ¢åˆ°ROOTç”¨æˆ·ï¼Œç„¶åæ·»åŠ gitç”¨æˆ·<br><img src="https://chenghuiyong.com/images/gitosis/-1440149716711.png" alt="Alt text"></p>
<p>åˆå§‹åŒ–Gitosisã€‚è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œç®¡ç†æˆ‘ä»¬çš„Gitosisé¡¹ç›®éœ€è¦æœ‰ä¸€ä¸ªç®¡ç†å‘˜ï¼Œè€Œè¿™ä¸ªç®¡ç†å‘˜æ˜¯éœ€è¦æŠŠè‡ªå·±çš„SSHå…¬é’¥å‘å¸ƒåˆ°è¿™å°æœåŠ¡å™¨ä¸Šçš„ã€‚æ¯”å¦‚ï¼Œæˆ‘æŠŠè‡ªå·±çš„Macç”¨æˆ·çš„å…¬é’¥ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚</p>
<p><img src="https://chenghuiyong.com/images/gitosis/-1440150675005.png" alt="Alt text"></p>
<p>åˆå§‹åŒ–Gitosisã€‚æ³¨æ„Gitosisé¡¹ç›®ä¸»é¡µæè¿°çš„å’Œæˆ‘ä»¬å®é™…æ‰§è¡Œçš„æœ‰äº›åŒºåˆ«ã€‚</p>
<p><img src="https://chenghuiyong.com/images/gitosis/-1440150789113.png" alt="Alt text"></p>
<p>åˆå§‹åŒ–æˆåŠŸåï¼Œå°±å¯ä»¥å®‰è£…ç®¡ç†æˆ‘ä»¬çš„é¡¹ç›®å’¯ã€‚æ¯”å¦‚ï¼Œæˆ‘ç”¨Macç”¨æˆ·å…ˆå…‹éš†Gitosisé¡¹ç›®</p>
<p><img src="https://chenghuiyong.com/images/gitosis/-1440151155774.png" alt="Alt text"></p>
<p>è¿™å°±æ˜¯Gitosisçš„é¡¹ç›®ç®¡ç†å‘˜ï¼šchenghuiyong<br><img src="https://chenghuiyong.com/images/gitosis/-1440151226269.png" alt="Alt text"></p>
<h3 id="4ã€é…ç½®Gitosis"><a href="#4ã€é…ç½®Gitosis" class="headerlink" title="4ã€é…ç½®Gitosis"></a>4ã€é…ç½®Gitosis</h3><p>æˆ‘ä»¬ç»§ç»­å¢åŠ ä¸€ä¸ªé¡¹ç›®ï¼Œæˆå‘˜è¿˜æ˜¯æˆ‘è‡ªå·±ï¼Œå…è®¸è¯»å†™ã€‚</p>
<p><img src="https://chenghuiyong.com/images/gitosis/-1440154341290.png" alt="Alt text"></p>
<p>æ¨é€åˆ°è¿œç¨‹ä»“åº“ä¸­ã€‚</p>
<p><img src="https://chenghuiyong.com/images/gitosis/-1440154441367.png" alt="Alt text"></p>
<p>é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å·²ç»æ–°å¢äº†ä¸€ä¸ªé¡¹ç›®ï¼šapi.chehubao.comï¼Œç°åœ¨éœ€è¦åšæ˜¯åœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªapi.chehubao.comç›®å½•ï¼Œåˆå§‹åŒ–è¯¥é¡¹ç›®ï¼Œç„¶åä¸è¿œç¨‹ä»“åº“å…³è”ï¼Œåœ¨æ¨é€åˆ°è¿œç¨‹ï¼ˆè¿™é‡Œæ¨é€æ—¶è¦æ³¨æ„ï¼Œæœ¬åœ°ä»“åº“é‡Œé¢ä¸€å®šè¦æœ‰å†…å®¹æ‰èƒ½æ¨é€æˆåŠŸ ï¼Œè€Œ<a href="http://git.oschina.net/progit/4-%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84-Git.html#4.7-Gitosis" target="_blank" rel="external">Pro Git</a> è¿™æœ¬ä¹¦é‡Œé¢æ˜¯é”™è¯¯çš„ï¼‰</p>
<p><img src="https://chenghuiyong.com/images/gitosis/-1440154725633.png" alt="Alt text"></p>
<p>æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼Œå¦‚æœè¿œç¨‹æ²¡æœ‰å®ƒé»˜è®¤ä¼šè‡ªåŠ¨åˆ›å»ºè¯¥ä»“åº“ã€‚<br><img src="https://chenghuiyong.com/images/gitosis/-1440154773210.png" alt="Alt text"></p>
<p>ç™»é™†åˆ°æœåŠ¡å™¨ï¼ŒæŸ¥çœ‹æ˜¯å¦åˆ›å»ºäº†è¯¥é¡¹ç›®</p>
<p><img src="https://chenghuiyong.com/images/gitosis/-1440154839318.png" alt="Alt text"></p>
<p>è‡³æ­¤ï¼ŒGitæœåŠ¡å™¨æ­å»ºä¸é¡¹ç›®ã€æƒé™ã€ç”¨æˆ·ç®¡ç†å·²ç»ç»“æŸã€‚åœ¨å†™è¿™ç¯‡æ–‡ç« å‰ï¼Œæˆ‘è‡ªå·±æ˜¯æŸ¥äº†å¾ˆå¤šèµ„æ–™ï¼Œå®è·µäº†å¤šæ¬¡ï¼Œä¹Ÿé‡åˆ°äº†éå¸¸å¤šçš„å›°éš¾ã€‚ç½‘ä¸Šçš„èµ„æ–™æ€»æ˜¯ä¸å®Œæ•´çš„ï¼Œæœ€åå¯¹æ¯”äº†ä¸åŒçš„èµ„æ–™ä¸å®˜æ–¹çš„æ–‡æ¡£ï¼Œæ€»ç»“äº†è¿™ç¯‡åšæ–‡ã€‚</p>
<p>æˆ‘ä»¬ç°åœ¨å…¬å¸çš„é¡¹ç›®ä¹Ÿå…¨éƒ¨åŸºäºGitï¼Œä½¿ç”¨Gitosisæˆæƒã€‚åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿä¸æ–­åœ¨ç§¯ç´¯Git-Flowçš„ç»éªŒå¿ƒå¾—ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šæ ¹æ®å®é™…é¡¹ç›®çš„æ“ä½œç»éªŒï¼Œåˆ†äº«ä¸€ç¯‡å…³äºå¦‚ä½•é«˜æ•ˆçš„åœ¨å›¢é˜Ÿä¸­ä½¿ç”¨Git-Flowæµç¨‹è¿›è¡Œé¡¹ç›®å¼€å‘çš„åšæ–‡ï¼Œå¦‚æœä½ å–œæ¬¢è¯·åœ¨æˆ‘çš„åšå®¢ä¸­å…³æ³¨æˆ‘ï¼š<a href="www.chenghuiyong.com">www.chenghuiyong.com</a></p>
<h3 id="2015-8-25æ›´æ–°"><a href="#2015-8-25æ›´æ–°" class="headerlink" title="2015-8-25æ›´æ–°"></a>2015-8-25æ›´æ–°</h3><p>å¦‚æœéœ€è¦é‡æ–°é…ç½®Gitosisçš„è¯ï¼Œè¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šæŠ¥é”™ï¼š</p>
<p><img src="https://chenghuiyong.com/images/gitosis/-1440493158186.png" alt="Alt text"></p>
<p>è¿™ä¸ªåŸå› ï¼Œæ˜¯å› ä¸ºä½ ç¬¬ä¸€æ¬¡é…ç½®Gitosisçš„ç”¨æˆ·çš„å…¬é’¥ï¼ˆid_rsa.pubï¼‰å†…å®¹é”™è¯¯å¯¼è‡´ã€‚</p>
<p>åªè¦æŒ‰ç…§æˆ‘ä¸Šé¢çš„æ“ä½œé…ç½®åï¼Œå¯ä»¥æ­£å¸¸å…‹éš†ï¼Œæ— éœ€å¯†ç </p>
<p><img src="https://chenghuiyong.com/images/gitosis/-1440493279065.png" alt="Alt text"></p>
<h1 id="å‚è€ƒèµ„æº"><a href="#å‚è€ƒèµ„æº" class="headerlink" title="å‚è€ƒèµ„æº"></a>å‚è€ƒèµ„æº</h1><ul>
<li><a href="http://git.oschina.net/progit/4-%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%E7%9A%84-Git.html" target="_blank" rel="external">Pro Gitï¼ˆä¸­æ–‡ç‰ˆï¼‰</a></li>
<li><a href="https://github.com/res0nat0r/gitosis" target="_blank" rel="external">https://github.com/res0nat0r/gitosis</a></li>
<li><a href="https://stackoverflow.com/questions/4882545/gitosis-asking-for-password" target="_blank" rel="external">gitosis asking for password</a></li>
<li><a href="https://stackoverflow.com/questions/25115959/gitosis-init-error-traceback-most-recent-call-last" target="_blank" rel="external">gitosis-init error | Traceback (most recent call last)</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ç¯‡å®é™…çš„æ“ä½œæ–‡æ¡£ï¼Œé‡Œé¢çš„å¤§éƒ¨åˆ†å›¾éƒ½æ˜¯è‡ªå·±äº²æ‰‹æˆªå±ï¼ŒåŠ›æ±‚è¾¾åˆ°çœŸå®å¹¶å¸Œæœ›å¸®åŠ©åˆ°æ›´å¤šçš„é‡åˆ°ç±»ä¼¼é—®é¢˜çš„å›°æƒ‘è€…ã€‚å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ç›´æ¥åœ¨æ–‡ç« æœ€ä¸‹é¢è”ç³»åˆ°æˆ‘ï¼Œä¹Ÿæ¬¢è¿æ‹ç –ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;å¼„æ¸…æ¥šå…³é”®è¯çœ¼ä¸æ¦‚å¿µ&quot;&gt;&lt;a 
    
    </summary>
    
    
      <category term="Git" scheme="https://www.chenghuiyong.com/tags/Git/"/>
    
      <category term="Gitosis" scheme="https://www.chenghuiyong.com/tags/Gitosis/"/>
    
  </entry>
  
</feed>
